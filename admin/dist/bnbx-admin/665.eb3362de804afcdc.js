"use strict";(self.webpackChunkbnbx_admin=self.webpackChunkbnbx_admin||[]).push([[665],{2665:(S,P,s)=>{s.r(P),s.d(P,{UserListModule:()=>k});var b=s(177),h=s(3152);function u(r,g,n,o,e,a,i){try{var d=r[a](i),l=d.value}catch(j){return void n(j)}d.done?g(l):Promise.resolve(l).then(o,e)}var p=s(5648),C=s(1471),t=s(8699);let f=(()=>{class r{transform(n,o){return n&&o?(o=o.toLowerCase(),n.filter(e=>Object.keys(e).some(a=>e[a]?.toString().toLowerCase().includes(o)))):n}static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275pipe=t.EJ8({name:"search",type:r,pure:!0})}}return r})();var _=s(9381),c=s(4341);function M(r,g){if(1&r){const n=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"div",29)(5,"span",30),t.EFF(6),t.k0s(),t.j41(7,"small",31),t.EFF(8),t.k0s(),t.j41(9,"small",31),t.EFF(10),t.k0s()()(),t.j41(11,"td")(12,"div",29)(13,"span"),t.EFF(14),t.k0s(),t.j41(15,"small",31),t.EFF(16),t.k0s()()(),t.j41(17,"td"),t.EFF(18),t.nI1(19,"date"),t.k0s(),t.j41(20,"td")(21,"button",32),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG();return t.Njj(i.updateUser(a._id))}),t.nrm(22,"i",33),t.k0s()()()}if(2&r){const n=g.$implicit,o=g.index,e=t.XpG();t.R7$(2),t.JRh((e.currentPage-1)*e.pageSize+(o+1)),t.R7$(4),t.JRh(n.name),t.R7$(2),t.SpI("ID: ",n.loginId,""),t.R7$(2),t.SpI("Ref: ",n.referralCode,""),t.R7$(4),t.JRh(n.email),t.R7$(2),t.JRh(n.mobile),t.R7$(2),t.JRh(t.i5U(19,7,n.createdAt,"MMM d, y"))}}function O(r,g){1&r&&(t.j41(0,"div",34),t.nrm(1,"i",35),t.j41(2,"h5",36),t.EFF(3,"No users found"),t.k0s()())}const v=[{path:"",component:(()=>{class r{constructor(n,o,e){this.UserServicesServices=n,this.router=o,this.searchFilterPipe=e,this.transactions=[],this.error=null,this.totalCredited=0,this.totalDebited=0,this.totalTransactions=0,this.pageSize=10,this.currentPage=1,this.filteredTransactions=[],this.transactionType="",this.status="",this.startDate="",this.endDate="",this.secretKey="123456789",this.filteredReferrals=[],this.itemPerPage=10,this.searchTerm="",this.isFiltering=!1,this.totalPages=1,this.filter={search:"",greaterThan:"",lessThan:"",type:"",startDate:"",endDate:""}}ngOnInit(){this.token=localStorage.getItem("authToken"),this.userList(this.currentPage,this.pageSize)}userList(n,o){const e={page:n.toString(),sizePerPage:o.toString()};this.filter.search?e.search=this.filter.search:this.isFiltering&&Object.keys(this.filter).forEach(a=>{this.filter[a]&&(e[a]=this.filter[a])}),this.UserServicesServices.toggleLoader(!0),this.UserServicesServices.getUserList(n,o,this.token,e).subscribe({next:a=>{this.transactions=a.data.docs,this.filteredTransactions=[...this.transactions],this.totalTransactions=a.data.totalDocs,this.UserServicesServices.toggleLoader(!1),this.totalPages=Math.ceil(this.totalTransactions/this.pageSize)},error:()=>{this.transactions=[],this.error="Failed to load transactions",this.UserServicesServices.toggleLoader(!1)}})}applyFilters(){this.isFiltering=Object.keys(this.filter).some(e=>"search"===e&&""!==this.filter[e]),this.userList(1,20)}resetFilters(){this.filter={search:"",greaterThan:"",lessThan:"",type:"",startDate:"",endDate:""},this.isFiltering=!1,this.userList(1,20)}filterReferrals(){var n=this;return function m(r){return function(){var g=this,n=arguments;return new Promise(function(o,e){var a=r.apply(g,n);function i(l){u(a,o,e,i,d,"next",l)}function d(l){u(a,o,e,i,d,"throw",l)}i(void 0)})}}(function*(){n.filteredReferrals=yield n.searchFilterPipe.transform(n.transactions,n.searchTerm),n.currentPage=1;let o=n.itemPerPage*n.currentPage;n.filteredReferrals=n.filteredReferrals.slice(o-n.itemPerPage,o),n.paginator.pageIndex=0})()}getFreeraTree(n){const o=C.AES.encrypt(n.toString(),this.secretKey).toString();this.router.navigate(["/reffral-tree"],{queryParams:{id:o}})}updateUser(n){const o=C.AES.encrypt(n.toString(),this.secretKey).toString();this.router.navigate(["/update-user"],{queryParams:{id:o}})}onPageChange(n){n>=1&&n<=this.totalPages&&(this.currentPage=n,this.userList(this.currentPage,this.pageSize))}onPageSizeChange(){this.currentPage=1,this.userList(this.currentPage,this.pageSize)}static{this.\u0275fac=function(o){return new(o||r)(t.rXU(_.d),t.rXU(h.Ix),t.rXU(f))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-user-list"]],viewQuery:function(o,e){if(1&o&&t.GBs(p.iy,5),2&o){let a;t.mGM(a=t.lsd())&&(e.paginator=a.first)}},features:[t.Jv_([f])],decls:54,vars:14,consts:[[1,"wrapper"],["id","content",1,"main-content"],[1,"container-fluid","px-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0",2,"color","#F0B90B"],[1,"search-container"],[1,"input-group"],[1,"input-group-text","bg-transparent","border-end-0"],[1,"fas","fa-search",2,"color","#F0B90B"],["type","text","placeholder","Search users...",1,"form-control","custom-search",2,"border-left","none",3,"ngModel","ngModelChange","input"],[1,"card","table-card"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","align-middle","mb-0"],[1,"py-3"],[4,"ngFor","ngForOf"],["class","text-center py-5",4,"ngIf"],[1,"custom-pagination","d-flex","align-items-center","justify-content-between","mt-4"],[1,"d-flex","align-items-center"],[1,"btn","btn-icon","me-2",3,"disabled","click"],[1,"fas","fa-angle-double-left"],[1,"fas","fa-angle-left"],[1,"page-info"],[1,"btn","btn-icon","ms-2",3,"disabled","click"],[1,"fas","fa-angle-right"],[1,"fas","fa-angle-double-right"],[1,"me-2"],[1,"form-select","form-select-sm",2,"width","70px",3,"ngModel","ngModelChange","change"],[3,"value"],[1,"d-flex","flex-column"],[1,"fw-bold"],[1,"text-muted1"],[1,"btn","btn-icon",3,"click"],[1,"fas","fa-edit",2,"color","#F0B90B"],[1,"text-center","py-5"],[1,"fas","fa-users","fa-3x","mb-3",2,"color","#F0B90B"],[1,"text-muted"]],template:function(o,e){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t.EFF(5,"User Management"),t.k0s(),t.j41(6,"div",5)(7,"div",6)(8,"span",7),t.nrm(9,"i",8),t.k0s(),t.j41(10,"input",9),t.bIt("ngModelChange",function(i){return e.filter.search=i})("input",function(){return e.applyFilters()}),t.k0s()()()(),t.j41(11,"div",10)(12,"div",11)(13,"div",12)(14,"table",13)(15,"thead")(16,"tr")(17,"th",14),t.EFF(18,"S.No"),t.k0s(),t.j41(19,"th",14),t.EFF(20,"User Details"),t.k0s(),t.j41(21,"th",14),t.EFF(22,"Contact Info"),t.k0s(),t.j41(23,"th",14),t.EFF(24,"Registration Date"),t.k0s(),t.j41(25,"th",14),t.EFF(26,"Actions"),t.k0s()()(),t.j41(27,"tbody"),t.DNE(28,M,23,10,"tr",15),t.k0s()()()()(),t.DNE(29,O,4,0,"div",16),t.j41(30,"div",17)(31,"div",18)(32,"button",19),t.bIt("click",function(){return e.onPageChange(1)}),t.nrm(33,"i",20),t.k0s(),t.j41(34,"button",19),t.bIt("click",function(){return e.onPageChange(e.currentPage-1)}),t.nrm(35,"i",21),t.k0s(),t.j41(36,"span",22),t.EFF(37),t.k0s(),t.j41(38,"button",23),t.bIt("click",function(){return e.onPageChange(e.currentPage+1)}),t.nrm(39,"i",24),t.k0s(),t.j41(40,"button",23),t.bIt("click",function(){return e.onPageChange(e.totalPages)}),t.nrm(41,"i",25),t.k0s()(),t.j41(42,"div",18)(43,"span",26),t.EFF(44,"Items per page:"),t.k0s(),t.j41(45,"select",27),t.bIt("ngModelChange",function(i){return e.pageSize=i})("change",function(){return e.onPageSizeChange()}),t.j41(46,"option",28),t.EFF(47,"5"),t.k0s(),t.j41(48,"option",28),t.EFF(49,"10"),t.k0s(),t.j41(50,"option",28),t.EFF(51,"25"),t.k0s(),t.j41(52,"option",28),t.EFF(53,"50"),t.k0s()()()()()()()),2&o&&(t.R7$(10),t.Y8G("ngModel",e.filter.search),t.R7$(18),t.Y8G("ngForOf",e.transactions),t.R7$(1),t.Y8G("ngIf",0===e.transactions.length),t.R7$(3),t.Y8G("disabled",1===e.currentPage),t.R7$(2),t.Y8G("disabled",1===e.currentPage),t.R7$(3),t.Lme("Page ",e.currentPage," of ",e.totalPages,""),t.R7$(1),t.Y8G("disabled",e.currentPage===e.totalPages),t.R7$(2),t.Y8G("disabled",e.currentPage===e.totalPages),t.R7$(5),t.Y8G("ngModel",e.pageSize),t.R7$(1),t.Y8G("value",5),t.R7$(2),t.Y8G("value",10),t.R7$(2),t.Y8G("value",25),t.R7$(2),t.Y8G("value",50))},dependencies:[b.Sq,b.bT,c.xH,c.y7,c.me,c.wz,c.BC,c.vS,b.vh],styles:[".main-content[_ngcontent-%COMP%]{transition:all .3s ease;width:calc(100% - 15rem);min-height:100vh;padding-top:1rem}.content-expanded[_ngcontent-%COMP%]{margin-left:0;width:100%}.card[_ngcontent-%COMP%]{background:#2B3139;border:1px solid rgba(240,185,11,.1);border-radius:8px}.table[_ngcontent-%COMP%]{color:#f0b90b;margin:0;width:100%;border-collapse:separate;border-spacing:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#2B3139;color:#f0b90b;font-weight:600;padding:1rem;border-bottom:2px solid rgba(240,185,11,.2);white-space:nowrap}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:80px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:25%}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:25%}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:20%}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:15%}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:100px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#2B3139;color:#f0b90b;padding:1rem;border-bottom:1px solid rgba(240,185,11,.1);vertical-align:middle}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin-bottom:.25rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .user-id[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .user-ref[_ngcontent-%COMP%]{font-size:.85rem;color:#f0b90bb3}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .contact-email[_ngcontent-%COMP%]{margin-bottom:.25rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .contact-phone[_ngcontent-%COMP%]{font-size:.9rem;color:#f0b90bcc}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .balance-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem;font-size:.9rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .balance-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .balance-item[_ngcontent-%COMP%]   .balance-label[_ngcontent-%COMP%]{color:#f0b90bb3}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .balance-item[_ngcontent-%COMP%]   .balance-value[_ngcontent-%COMP%]{font-weight:500}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:rgba(240,185,11,.05)}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:rgba(43,49,57,.9)}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   .custom-pagination[_ngcontent-%COMP%]{background:rgba(43,49,57,.9);padding:.75rem 1rem;border-radius:8px;border:1px solid rgba(240,185,11,.1)}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   .custom-pagination[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(240,185,11,.2);color:#f0b90b;width:32px;height:32px;padding:0;display:flex;align-items:center;justify-content:center}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   .custom-pagination[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover:not(:disabled){background:rgba(240,185,11,.1)}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   .custom-pagination[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   .custom-pagination[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   .custom-pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{color:#f0b90b;margin:0 1rem;min-width:100px;text-align:center}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   .custom-pagination[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{background-color:#2b3139e6;border:1px solid rgba(240,185,11,.2);color:#f0b90b}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   .custom-pagination[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:#f0b90b;box-shadow:0 0 0 .2rem #f0b90b40}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   .custom-pagination[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#2b3139;color:#f0b90b}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   .custom-pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f0b90b}.btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border:1px solid rgba(240,185,11,.2);border-radius:6px;transition:all .2s ease;background:transparent;color:#f0b90b}.btn-icon[_ngcontent-%COMP%]:hover{background:rgba(240,185,11,.1);border-color:#f0b90b}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.search-container[_ngcontent-%COMP%]{max-width:300px;margin-left:auto}.search-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{background:#2B3139;border-radius:8px;overflow:hidden}.search-container[_ngcontent-%COMP%]   .custom-search[_ngcontent-%COMP%]{height:42px;background:#2B3139;border:1px solid rgba(240,185,11,.2);color:#f0b90b;padding-left:1rem}.search-container[_ngcontent-%COMP%]   .custom-search[_ngcontent-%COMP%]:focus{border-color:#f0b90b;box-shadow:0 0 0 2px #f0b90b1a}.search-container[_ngcontent-%COMP%]   .custom-search[_ngcontent-%COMP%]::placeholder{color:#f0b90b80}.mat-paginator[_ngcontent-%COMP%]{background:transparent}.mat-paginator[_ngcontent-%COMP%]     .mat-paginator-container{color:#f0b90b;min-height:48px}.mat-paginator[_ngcontent-%COMP%]     .mat-paginator-range-label, .mat-paginator[_ngcontent-%COMP%]     .mat-paginator-page-size-label{color:#f0b90bb3}.mat-paginator[_ngcontent-%COMP%]     .mat-select-value, .mat-paginator[_ngcontent-%COMP%]     .mat-select-arrow{color:#f0b90b}.mat-paginator[_ngcontent-%COMP%]     .mat-paginator-navigation-button{color:#f0b90b}"]})}}return r})()}];let y=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[h.iI.forChild(v),h.iI]})}}return r})();var F=s(2211);let k=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[b.MD,y,p.Ou,c.YN,c.X1,F.ft]})}}return r})()}}]);