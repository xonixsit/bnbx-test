"use strict";(self.webpackChunkbnbx_admin=self.webpackChunkbnbx_admin||[]).push([[320],{6320:(N,l,i)=>{i.r(l),i.d(l,{DashboardModule:()=>j});var c=i(177),d=i(3152),t=i(8699),h=i(810),u=i(5794),f=i(228);function p(a,r){if(1&a&&(t.j41(0,"div",20)(1,"div",21)(2,"div",22),t.nrm(3,"i"),t.j41(4,"h3",23),t.EFF(5),t.k0s()(),t.j41(6,"p",24),t.EFF(7),t.k0s()()()),2&a){const n=r.$implicit;t.R7$(3),t.ZvI("fas ",n.icon," card-icon"),t.R7$(2),t.JRh(n.title),t.R7$(2),t.SpI("",n.value," USDT")}}function m(a,r){1&a&&(t.j41(0,"span"),t.EFF(1,"Transaction Rejected"),t.k0s())}function b(a,r){1&a&&(t.j41(0,"span"),t.EFF(1,"Please Wait for approval"),t.k0s())}function C(a,r){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const n=t.XpG().$implicit;t.R7$(1),t.JRh(n.description)}}const P=function(a,r,n,e){return{"bg-success":a,"bg-danger":r,"bg-info":n,"bg-warning":e}},O=function(a,r,n){return{"bg-success":a,"bg-danger":r,"bg-warning":n}};function M(a,r){if(1&a&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"span",25),t.EFF(5),t.k0s()(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td",26),t.qex(11,27),t.DNE(12,m,2,0,"span",28),t.DNE(13,b,2,0,"span",28),t.DNE(14,C,2,1,"span",29),t.bVm(),t.k0s(),t.j41(15,"td",26)(16,"span",30),t.EFF(17),t.k0s()(),t.j41(18,"td"),t.EFF(19),t.nI1(20,"date"),t.k0s()()),2&a){const n=r.$implicit,e=r.index;t.R7$(2),t.JRh(e+1),t.R7$(2),t.Y8G("ngClass",t.ziG(18,P,"DEPOSIT"===n.transactionType,"WITHDRAW"===n.transactionType,"BOND-IN"===n.transactionType,"CONVERT-REWARD"===n.transactionType)),t.R7$(1),t.JRh(n.transactionType),t.R7$(1),t.AVh("amount-positive",n.amount>0),t.R7$(1),t.SpI(" ",n.amount>0?n.amount:"-"," "),t.R7$(1),t.AVh("amount-negative",n.amount<0),t.R7$(1),t.SpI(" ",n.amount<0?n.amount:"-"," "),t.R7$(2),t.Y8G("ngSwitch",n.status),t.R7$(1),t.Y8G("ngSwitchCase","REJECTED"),t.R7$(1),t.Y8G("ngSwitchCase","PENDING"),t.R7$(3),t.Y8G("ngClass",t.sMw(23,O,"COMPLETED"===n.status,"FAILED"===n.status||"REJECTED"===n.status,"PENDING"===n.status)),t.R7$(1),t.JRh(n.status),t.R7$(2),t.JRh(t.i5U(20,15,n.createdAt,"MMM dd, yyyy, h:mm:ss a"))}}function _(a,r){1&a&&(t.j41(0,"div",31),t.EFF(1,"No transactions available."),t.k0s())}const v=function(a){return{title:"BALANCE",value:a,icon:"fa-wallet"}},w=function(a){return{title:"Total Staked",value:a,icon:"fa-arrow-circle-down"}},R=function(a){return{title:"Total Withdrawal",value:a,icon:"fa-arrow-circle-up"}},D=function(a){return{title:"Pending Deposit",value:a,icon:"fa-clock"}},B=function(a){return{title:"Pending Withdrawal",value:a,icon:"fa-hourglass-half"}},T=function(a){return{title:"Total Referral balance",value:a,icon:"fa-users"}},F=function(a){return{title:"Total Bonus Balance",value:a,icon:"fa-gift"}},k=function(a){return{title:"Rank Bonus Balance",value:a,icon:"fa-crown"}},E=function(a,r,n,e,o,s,$,I){return[a,r,n,e,o,s,$,I]},y=[{path:"",component:(()=>{class a{constructor(n,e,o){this.authService=n,this.toastr=e,this.transactionService=o,this.userBlance=0,this.totalStakedBalance=0,this.totalWithdrawalBalance=0,this.totalTeamTurnoverBalance=0,this.totalDirectTeamTurnoverBalance=0,this.totalInternalTransferBalance=0,this.totalUnlockRewardBalnce=0,this.totalReferralRewardBalance=0,this.totalRankBonusBalance=0,this.totalRewardBalance=0,this.pendingReward=0,this.refferalcode="",this.bondBalance="",this.totalCredited=0,this.totalDebited=0,this.totalTransactions=0,this.pageSize=10,this.currentPage=1,this.filteredTransactions=[],this.transactionType="",this.status="",this.startDate="",this.endDate="",this.transactions=[],this.pendingDepositBalance=0,this.pendingWithdrawalBalance=0,this.totalBonusBalance=0,this.totalDeposits=0}ngOnInit(){this.token=localStorage.getItem("authToken"),console.log(this.token),this.getProfileInfo(),this.fetchTransactions(this.currentPage,this.pageSize)}getProfileInfo(){this.authService.getProfile(this.token).subscribe({next:n=>{console.log(n.data),this.userBlance=n.data.totalBUSDBalance,this.totalStakedBalance=n.data.totalStakedBalance,this.totalWithdrawalBalance=n.data.totalWithdrawalBalance,this.pendingDepositBalance=n.data.totalPendingDeposits||0,this.pendingWithdrawalBalance=n.data.totalPendingWithdraws||0,this.totalReferralRewardBalance=n.data.totalReferralRewardBalance,this.totalBonusBalance=n.data.totalBonusBalance||0,this.totalRankBonusBalance=n.data.totalRankBonusBalance,this.totalDirectTeamTurnoverBalance=n.data.totalDirectTeamTurnoverBalance,this.totalInternalTransferBalance=n.data.totalTRADEBalance,this.totalTeamTurnoverBalance=n.data.totalTeamTurnoverBalance,this.totalUnlockRewardBalnce=n.data.totalUnlockRewardBalnce,this.bondBalance=n.data.totalStakingRewardBalance,this.totalDeposits=n.data.totalDeposits||0,this.refferalcode=localStorage.getItem("referralCode"),this.pendingReward=n.data.pendingReward},error:n=>{this.toastr.error("Failed to load profile information","Error")}})}fetchTransactions(n,e){const o={page:n.toString(),sizePerPage:"10"};this.transactionType&&(o.transactionType=this.transactionType),this.status&&(o.status=this.status),this.startDate&&(o.startDate=this.startDate),this.endDate&&(o.endDate=this.endDate),this.authService.toggleLoader(!0),this.transactionService.getTransactions(n,e,this.token,o).subscribe({next:s=>{this.transactions=s.data.docs,this.filteredTransactions=[...this.transactions],this.totalTransactions=s.data.totalDocs,this.calculateTotals(),this.authService.toggleLoader(!1)},error:s=>{this.transactions=[],this.error="Failed to load transactions",this.authService.toggleLoader(!1)}})}copyReferralLink(){const n=`${window.location.origin}/signup?referralCode=${this.refferalcode}`;navigator.clipboard.writeText(n).then(()=>{this.toastr.success("Referral link copied to clipboard!")}).catch(e=>{console.error("Failed to copy referral link: ",e),this.toastr.error("Failed to copy referral link.")})}applyFilters(){this.currentPage=1,this.fetchTransactions(this.currentPage,this.pageSize)}calculateTotals(){this.totalCredited=this.transactions.filter(n=>n.amount>0).reduce((n,e)=>n+e.amount,0),this.totalDebited=this.transactions.filter(n=>n.amount<0).reduce((n,e)=>n+Math.abs(e.amount),0)}onPageChange(n){this.currentPage=n.pageIndex+1,this.pageSize=n.pageSize,this.fetchTransactions(this.currentPage,this.pageSize)}static{this.\u0275fac=function(e){return new(e||a)(t.rXU(h.Y),t.rXU(u.tw),t.rXU(f.I))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-dashboard"]],decls:41,vars:29,consts:[[1,"dashboard-container"],[1,"main-content"],[1,"wrapper1"],[1,"container"],[1,"dashboard-header"],[1,"d-flex","justify-content-between","align-items-center"],[1,"dashboard-title","mb-0"],[1,"referral-code-wrapper"],[1,"referral-label"],[1,"mx-1","text-warning"],["title","Copy to clipboard",1,"fas","fa-copy","text-warning","cursor-pointer",3,"click"],[1,"row","justify-content-center","g-4"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"row","justify-content-center","mt-5"],[1,"transaction-section"],[1,"section-title"],[1,"table-responsive"],[1,"custom-table"],[4,"ngFor","ngForOf"],["class","text-white",4,"ngIf"],[1,"col-md-4","mb-3"],[1,"dashboard-card"],[1,"card-header"],[1,"card-title"],[1,"card-value"],[1,"badge",3,"ngClass"],[1,"px-3","py-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"badge","text-nowrap",3,"ngClass"],[1,"text-white"]],template:function(e,o){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),t.EFF(7,"Dashboard"),t.k0s(),t.j41(8,"div",7)(9,"span",8),t.EFF(10,"Referral code:"),t.k0s(),t.j41(11,"strong",9),t.EFF(12),t.k0s(),t.j41(13,"i",10),t.bIt("click",function(){return o.copyReferralLink()}),t.k0s()()()(),t.j41(14,"div",11),t.DNE(15,p,8,5,"div",12),t.k0s(),t.j41(16,"div",13)(17,"div",14)(18,"h2",15),t.EFF(19,"Latest Transactions"),t.k0s(),t.j41(20,"div",16)(21,"table",17)(22,"thead")(23,"tr")(24,"th"),t.EFF(25,"S.No"),t.k0s(),t.j41(26,"th"),t.EFF(27,"Transaction Type"),t.k0s(),t.j41(28,"th"),t.EFF(29,"Credited Amount"),t.k0s(),t.j41(30,"th"),t.EFF(31,"Debited Amount"),t.k0s(),t.j41(32,"th"),t.EFF(33,"Description"),t.k0s(),t.j41(34,"th"),t.EFF(35,"Status"),t.k0s(),t.j41(36,"th"),t.EFF(37,"Date"),t.k0s()()(),t.j41(38,"tbody"),t.DNE(39,M,21,27,"tr",18),t.k0s()()()(),t.DNE(40,_,2,0,"div",19),t.k0s()()()()()),2&e&&(t.R7$(12),t.JRh(o.refferalcode),t.R7$(3),t.Y8G("ngForOf",t.lV(20,E,t.eq3(4,v,o.userBlance),t.eq3(6,w,o.totalStakedBalance),t.eq3(8,R,o.totalWithdrawalBalance),t.eq3(10,D,o.pendingDepositBalance),t.eq3(12,B,o.pendingWithdrawalBalance),t.eq3(14,T,o.totalReferralRewardBalance),t.eq3(16,F,o.totalBonusBalance),t.eq3(18,k,o.totalRankBonusBalance))),t.R7$(24),t.Y8G("ngForOf",o.transactions),t.R7$(1),t.Y8G("ngIf",0===o.transactions.length))},dependencies:[c.YU,c.Sq,c.bT,c.ux,c.e1,c.fG,c.vh],styles:[".dashboard-container[_ngcontent-%COMP%]{background-color:#2b3139;min-height:100vh}.main-content[_ngcontent-%COMP%]{flex:1;margin-top:6.2rem}.main-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.content1[_ngcontent-%COMP%]{padding-top:0}.referral-code[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem}.referral-code[_ngcontent-%COMP%]   .cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.referral-code[_ngcontent-%COMP%]   .cursor-pointer[_ngcontent-%COMP%]:hover{opacity:.8}.dashboard-card[_ngcontent-%COMP%]{padding:1.5rem;background:linear-gradient(145deg,#2B3139,#1E2329);border-radius:12px;border:1px solid rgba(240,185,11,.1);box-shadow:0 4px 20px #0003;transition:all .3s ease}.dashboard-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);border-color:#f0b90b4d;box-shadow:0 8px 25px #f0b90b1a}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.card-icon[_ngcontent-%COMP%]{color:#f0b90b;font-size:1.75rem;background:rgba(240,185,11,.1);padding:.75rem;border-radius:8px;transition:all .3s ease}.card-title[_ngcontent-%COMP%]{margin:0;color:#848e9c;font-size:1rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.card-value[_ngcontent-%COMP%]{color:#f0b90b;font-size:1.5rem;font-weight:600;margin:0;padding-left:3.5rem}.custom-table[_ngcontent-%COMP%]{background-color:#1e2329;color:#fff;border-radius:8px;overflow:hidden;width:100%}.custom-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#1e2329}.custom-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#848e9c;font-weight:500;padding:16px 24px;border-bottom:1px solid rgba(240,185,11,.1);font-size:14px;white-space:nowrap;text-transform:none}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid rgb(43,49,57);background-color:#1e2329}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#2b3139}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 24px;color:#fff;font-size:14px;white-space:nowrap}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.amount-positive[_ngcontent-%COMP%]{color:#02c076}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.amount-negative[_ngcontent-%COMP%]{color:#f6465d}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.5rem}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .status-cell.COMPLETED[_ngcontent-%COMP%]{color:#02c076}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .status-cell.PENDING[_ngcontent-%COMP%]{color:#f0b90b}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .status-cell.REJECTED[_ngcontent-%COMP%]{color:#f6465d}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .status-cell.APPROVED[_ngcontent-%COMP%]{color:#02c076}.transaction-section[_ngcontent-%COMP%]{margin-top:2rem}.transaction-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:#fff;font-size:24px;font-weight:500;margin-bottom:1.5rem}.transaction-title[_ngcontent-%COMP%]{color:#fff;font-size:1.75rem;font-weight:500;margin-bottom:1.5rem}.status-completed[_ngcontent-%COMP%]{color:#02c076}.container[_ngcontent-%COMP%]{padding:0!important}.status-pending[_ngcontent-%COMP%]{color:#f0b90b}.status-rejected[_ngcontent-%COMP%]{color:#f6465d}.status-approved[_ngcontent-%COMP%]{color:#02c076}.text-warning[_ngcontent-%COMP%]{color:#f0b90b!important}.text-success[_ngcontent-%COMP%]{color:#02c076!important}.text-danger[_ngcontent-%COMP%]{color:#f6465d!important}.user-info-section[_ngcontent-%COMP%]{width:100%}.id-info-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1rem}.id-item[_ngcontent-%COMP%]{display:flex;align-items:center;background:rgba(240,185,11,.1);padding:.5rem 1rem;border-radius:8px}.id-item[_ngcontent-%COMP%]   .id-label[_ngcontent-%COMP%]{color:#999;margin-right:.5rem;white-space:nowrap}.id-item[_ngcontent-%COMP%]   .fa-copy[_ngcontent-%COMP%]{margin-left:.5rem;cursor:pointer;transition:opacity .2s}.id-item[_ngcontent-%COMP%]   .fa-copy[_ngcontent-%COMP%]:hover{opacity:.8}@media (max-width: 768px){.id-info-wrapper[_ngcontent-%COMP%]{gap:.75rem}.id-item[_ngcontent-%COMP%]{padding:.4rem .75rem;font-size:.9rem}}"]})}}return a})()}];let g=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(y),d.iI]})}}return a})();var x=i(5648),S=i(4341);let j=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[c.MD,g,g,x.Ou,S.YN]})}}return a})()}}]);