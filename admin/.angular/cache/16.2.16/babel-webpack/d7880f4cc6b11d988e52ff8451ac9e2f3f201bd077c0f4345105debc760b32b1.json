{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/plans.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"src/app/services/auth/auth-services.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction PlansComponent_tr_23_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function PlansComponent_tr_23_button_10_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const plan_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.startEditing(plan_r1));\n    });\n    i0.ɵɵelement(1, \"i\", 18);\n    i0.ɵɵtext(2, \" Edit \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlansComponent_tr_23_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function PlansComponent_tr_23_div_11_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const plan_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.savePlan(plan_r1));\n    });\n    i0.ɵɵelement(2, \"i\", 21);\n    i0.ɵɵtext(3, \" Save \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function PlansComponent_tr_23_div_11_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const plan_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.cancelEditing(plan_r1));\n    });\n    i0.ɵɵelement(5, \"i\", 23);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PlansComponent_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function PlansComponent_tr_23_Template_input_ngModelChange_4_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const plan_r1 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(plan_r1.rate = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"td\")(6, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function PlansComponent_tr_23_Template_input_ngModelChange_6_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const plan_r1 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(plan_r1.min = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"td\")(8, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function PlansComponent_tr_23_Template_input_ngModelChange_8_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const plan_r1 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(plan_r1.max = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"td\", 11);\n    i0.ɵɵtemplate(10, PlansComponent_tr_23_button_10_Template, 3, 0, \"button\", 15);\n    i0.ɵɵtemplate(11, PlansComponent_tr_23_div_11_Template, 6, 0, \"div\", 16);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const plan_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(plan_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", plan_r1.rate)(\"disabled\", !plan_r1.isEditing);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", plan_r1.min)(\"disabled\", !plan_r1.isEditing);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", plan_r1.max)(\"disabled\", !plan_r1.isEditing);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !plan_r1.isEditing);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", plan_r1.isEditing);\n  }\n}\nlet PlansComponent = /*#__PURE__*/(() => {\n  class PlansComponent {\n    constructor(plansService, toastr, authServices) {\n      this.plansService = plansService;\n      this.toastr = toastr;\n      this.authServices = authServices;\n      this.plans = [];\n      this.token = null;\n    }\n    ngOnInit() {\n      this.loadPlans();\n    }\n    loadPlans() {\n      this.token = localStorage.getItem('authToken');\n      this.plansService.getPlans(this.token).subscribe({\n        next: response => {\n          this.authServices.toggleLoader(false);\n          this.plans = response.data.map(plan => ({\n            ...plan,\n            isEditing: false\n          }));\n        },\n        error: error => {\n          this.toastr.error('Failed to load plans');\n          console.error('Error loading plans:', error);\n        }\n      });\n    }\n    startEditing(plan) {\n      plan.originalData = {\n        ...plan\n      };\n      plan.isEditing = true;\n    }\n    cancelEditing(plan) {\n      Object.assign(plan, plan.originalData);\n      plan.isEditing = false;\n      delete plan.originalData;\n    }\n    savePlan(plan) {\n      const updateData = {\n        rate: plan.rate,\n        min: plan.min,\n        max: plan.max,\n        duration: plan.duration\n      };\n      this.token = localStorage.getItem('authToken');\n      // console.log(this.token);\n      this.plansService.updatePlan(plan.id, updateData, this.token).subscribe({\n        next: response => {\n          plan.isEditing = false;\n          delete plan.originalData;\n          this.toastr.success('Plan updated successfully');\n        },\n        error: error => {\n          this.toastr.error('Failed to update plan');\n          console.error('Error updating plan:', error);\n        }\n      });\n    }\n    static {\n      this.ɵfac = function PlansComponent_Factory(t) {\n        return new (t || PlansComponent)(i0.ɵɵdirectiveInject(i1.PlansService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.AuthServicesService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: PlansComponent,\n        selectors: [[\"app-plans\"]],\n        decls: 24,\n        vars: 1,\n        consts: [[1, \"container-fluid\", \"px-4\"], [1, \"row\"], [1, \"col-12\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-4\", 2, \"margin-top\", \"80px\"], [1, \"mb-0\", 2, \"color\", \"#F0B90B\"], [1, \"card\", 2, \"background\", \"rgba(43, 49, 57, 0.9)\", \"border\", \"1px solid rgba(240, 185, 11, 0.1)\"], [1, \"card-body\", \"p-0\"], [1, \"table-responsive\"], [1, \"table\", \"table-hover\", \"align-middle\", \"mb-0\"], [2, \"background\", \"rgba(240, 185, 11, 0.1)\"], [1, \"px-4\"], [1, \"text-end\", \"px-4\"], [4, \"ngFor\", \"ngForOf\"], [1, \"px-4\", \"fw-bold\"], [\"type\", \"number\", 1, \"form-control\", \"form-control-sm\", \"bg-transparent\", \"text-white\", 2, \"max-width\", \"120px\", 3, \"ngModel\", \"disabled\", \"ngModelChange\"], [\"class\", \"btn btn-outline-warning btn-sm\", \"style\", \"min-width: 80px;\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn-group\", 4, \"ngIf\"], [1, \"btn\", \"btn-outline-warning\", \"btn-sm\", 2, \"min-width\", \"80px\", 3, \"click\"], [1, \"fas\", \"fa-edit\", \"me-1\"], [1, \"btn-group\"], [1, \"btn\", \"btn-success\", \"btn-sm\", 2, \"min-width\", \"80px\", 3, \"click\"], [1, \"fas\", \"fa-check\", \"me-1\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"click\"], [1, \"fas\", \"fa-times\"]],\n        template: function PlansComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h2\", 4);\n            i0.ɵɵtext(5, \"Investment Plans Management\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\", 6)(8, \"div\", 7)(9, \"table\", 8)(10, \"thead\")(11, \"tr\", 9)(12, \"th\", 10);\n            i0.ɵɵtext(13, \"Plan Name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"th\");\n            i0.ɵɵtext(15, \"Interest Rate (%)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"th\");\n            i0.ɵɵtext(17, \"Minimum Amount\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"th\");\n            i0.ɵɵtext(19, \"Maximum Amount\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"th\", 11);\n            i0.ɵɵtext(21, \"Actions\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(22, \"tbody\");\n            i0.ɵɵtemplate(23, PlansComponent_tr_23_Template, 12, 9, \"tr\", 12);\n            i0.ɵɵelementEnd()()()()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(23);\n            i0.ɵɵproperty(\"ngForOf\", ctx.plans);\n          }\n        },\n        dependencies: [i4.NgForOf, i4.NgIf, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.NgControlStatus, i5.NgModel],\n        styles: [\"[_nghost-%COMP%]   .table[_ngcontent-%COMP%]{color:#fff;background-color:#f0b90b1a!important;border-color:#ffffff1a}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#f0b90b;font-weight:600;border-color:#f0b90b1a}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-color:#ffffff1a;vertical-align:middle}[_nghost-%COMP%]   .table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(caption) > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{background-color:#ffffff1a!important}[_nghost-%COMP%]   .editing-row[_ngcontent-%COMP%]{background:rgba(240,185,11,.05)}[_nghost-%COMP%]   .readonly-input[_ngcontent-%COMP%]{background:transparent!important;border-color:transparent!important;padding:.25rem 0}[_nghost-%COMP%]   .readonly-input[_ngcontent-%COMP%]:disabled{color:#fff!important}[_nghost-%COMP%]   .input-group-text[_ngcontent-%COMP%]{font-size:.875rem}[_nghost-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:90px}[_nghost-%COMP%]   .btn.btn-warning[_ngcontent-%COMP%]{color:#000}[_nghost-%COMP%]   .btn.btn-warning[_ngcontent-%COMP%]:hover{background:#F0B90B;border-color:#f0b90b}\"]\n      });\n    }\n  }\n  return PlansComponent;\n})();\nexport { PlansComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}