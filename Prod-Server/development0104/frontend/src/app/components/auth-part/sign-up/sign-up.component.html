<div class="container-fluid">
    <app-header-nav></app-header-nav>
    <div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center py-5 mt-5">
        <div class="row w-100 justify-content-center">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-11 col-md-8 col-lg-6">
                        <div class="card p-3 p-md-4 shadow-sm overflow-auto custom-scrollbar" [ngClass]="{'dark-mode-card': isDarkMode}" style="max-height: 85vh;">
                            <div *ngIf="isDarkMode"></div>
                            <div  *ngIf="isDarkMode"></div>

                            <!-- Sign-Up Form -->
                            <div *ngIf="!isOtpSent">
                                <h2 class="text-center mb-4 text-white">Sign Up</h2>
                                <form [formGroup]="signUpForm" (ngSubmit)="onSubmit()">
                                    <div class="row">
                                        <!-- Left Column -->
                                        <div class="col-md-6">
                                            <!-- Full Name Input -->
                                            <div class="form-group mb-3">
                                                <label class="form-label text-white-50 mb-2">Full Name</label>
                                                <div class="input-group">
                                                    <span class="input-group-text bg-dark text-white border-secondary">
                                                        <i class="fa-solid fa-user"></i>
                                                    </span>
                                                    <input type="text" 
                                                           class="form-control bg-dark text-white border-secondary" 
                                                           id="fullName" 
                                                           placeholder="Enter your full name"
                                                           formControlName="name" 
                                                           autocomplete="off">
                                                </div>
                                                <div *ngIf="signUpForm.get('name').touched && signUpForm.get('name').invalid"
                                                    class="text-danger small mt-1">
                                                    Full name is required.
                                                </div>
                                            </div>

                                            <!-- Email Input -->
                                            <div class="form-group mb-3">
                                                <label class="form-label text-white-50 mb-2">Email</label>
                                                <div class="input-group">
                                                    <span class="input-group-text bg-dark text-white border-secondary">
                                                        <i class="fa-solid fa-envelope"></i>
                                                    </span>
                                                    <input type="email" 
                                                           class="form-control bg-dark text-white border-secondary" 
                                                           id="email" 
                                                           placeholder="Enter your email"
                                                           formControlName="email" 
                                                           autocomplete="off">
                                                </div>
                                                <div *ngIf="signUpForm.get('email').touched && signUpForm.get('email').invalid"
                                                    class="text-danger small mt-1">
                                                    <div *ngIf="signUpForm.get('email').errors?.['required']">Email is required.</div>
                                                    <div *ngIf="signUpForm.get('email').errors?.['email']">Enter a valid email.</div>
                                                </div>
                                            </div>

                                            <!-- Mobile Input -->
                                            <div class="form-group mb-3">
                                                <label class="form-label text-white-50 mb-2">Mobile Number</label>
                                                <div class="input-group">
                                                    <span class="input-group-text bg-dark text-white border-secondary">
                                                        <i class="fa-solid fa-phone"></i>
                                                    </span>
                                                    <input type="tel" 
                                                           class="form-control bg-dark text-white border-secondary" 
                                                           id="mobile" 
                                                           placeholder="Enter your mobile number"
                                                           formControlName="mobile" 
                                                           autocomplete="off">
                                                </div>
                                                <div *ngIf="signUpForm.get('mobile').touched && signUpForm.get('mobile').invalid"
                                                    class="text-danger small mt-1">
                                                    Mobile number is required.
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Right Column -->
                                        <div class="col-md-6">
                                            <!-- Password Input -->
                                            <div class="form-group mb-3">
                                                <label class="form-label text-white-50 mb-2">Password</label>
                                                <div class="input-group">
                                                    <span class="input-group-text bg-dark text-white border-secondary">
                                                        <i class="fa-solid fa-lock"></i>
                                                    </span>
                                                    <input [type]="isPasswordVisible ? 'text' : 'password'" 
                                                           class="form-control bg-dark text-white border-secondary"
                                                           id="password" 
                                                           placeholder="Enter your password"
                                                           formControlName="password">
                                                    <span class="input-group-text bg-dark text-white border-secondary" 
                                                          (click)="togglePasswordVisibility()">
                                                        <i class="fa" [ngClass]="isPasswordVisible ? 'fa-eye' : 'fa-eye-slash'"></i>
                                                    </span>
                                                </div>
                                                <div *ngIf="signUpForm.get('password').touched && signUpForm.get('password').invalid"
                                                    class="text-danger small mt-1">
                                                    <div *ngIf="signUpForm.get('password').errors?.['required']">Password is required.</div>
                                                    <div *ngIf="signUpForm.get('password').errors?.['minlength']">Password must be at least 6 characters.</div>
                                                </div>
                                            </div>

                                            <!-- Confirm Password -->
                                            <div class="form-group mb-3">
                                                <label class="form-label text-white-50 mb-2">Confirm Password</label>
                                                <div class="input-group">
                                                    <span class="input-group-text bg-dark text-white border-secondary">
                                                        <i class="fa-solid fa-lock"></i>
                                                    </span>
                                                    <input [type]="isPasswordVisible ? 'text' : 'password'" 
                                                           class="form-control bg-dark text-white border-secondary"
                                                           id="confirmPassword" 
                                                           placeholder="Confirm your password"
                                                           formControlName="cnfPassword" 
                                                           autocomplete="off">
                                                    <span class="input-group-text bg-dark text-white border-secondary" 
                                                          (click)="togglePasswordVisibility()">
                                                        <i class="fa" [ngClass]="isPasswordVisible ? 'fa-eye' : 'fa-eye-slash'"></i>
                                                    </span>
                                                </div>
                                                <div *ngIf="signUpForm.get('cnfPassword').touched && signUpForm.get('cnfPassword').invalid"
                                                    class="text-danger small mt-1">
                                                    Confirm password is required.
                                                </div>
                                            </div>

                                            <!-- Referral Code -->
                                            <div class="form-group mb-3">
                                                <label class="form-label text-white-50 mb-2">Referral Code</label>
                                                <div class="input-group">
                                                    <span class="input-group-text bg-dark text-white border-secondary">
                                                        <i class="fa-solid fa-user-plus"></i>
                                                    </span>
                                                    <input type="text" 
                                                           class="form-control bg-dark text-white border-secondary"
                                                           id="referral"
                                                           placeholder="Enter referral code"
                                                           formControlName="referral"
                                                           autocomplete="off">
                                                </div>
                                                <div *ngIf="signUpForm.get('referral').touched && signUpForm.get('referral').invalid"
                                                    class="text-danger small mt-1">
                                                    Referral code is required.
                                                </div>
                                                <div *ngIf="referralName" class="text-success small mt-1">
                                                    Referral Email: {{ referralName }}
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Terms and Sign Up Button -->
                                        <div class="col-12">
                                            <div class="form-group mb-4">
                                                <div class="form-check custom-checkbox">
                                                    <input class="form-check-input" 
                                                           type="checkbox" 
                                                           id="termsConditions"
                                                           formControlName="termsConditions" 
                                                           [ngClass]="{'checked': signUpForm.get('termsConditions').value}">
                                                    <label class="form-check-label ps-2 text-white-50" class="termsConditions" for="termsConditions">
                                                        I agree to the <a href="#">terms and conditions</a>
                                                    </label>
                                                </div>
                                                <div *ngIf="signUpForm.get('termsConditions').touched && signUpForm.get('termsConditions').invalid"
                                                    class="text-danger small mt-1">
                                                    You must agree to the terms and conditions.
                                                </div>
                                            </div>

                                            <div class="form-group mb-3 d-flex justify-content-center">
                                                <button type="submit" 
                                                        class="btn w-50" 
                                                        [disabled]="signUpForm.invalid"
                                                        style="background-color: #F0B90B; color: #000; font-weight: 600;">
                                                    Sign Up
                                                </button>
                                            </div>

                                            <div class="form-group mb-3 text-center text-white-50">
                                                Already have an account? 
                                                <a routerLink="/login" class="text-decoration-none" style="color: #F0B90B">Log In</a>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>

                            <!-- Success Message After OTP -->
                            <div class="mt-4" *ngIf="isOtpSent">
                                <div class="card success-card border-0">
                                    <div class="card-body text-center p-5">
                                        <div class="success-icon mb-4">
                                            <i class="fas fa-check-circle fa-4x text-success"></i>
                                        </div>
                                        <h2 class="welcome-text mb-4">Welcome to join BNBX</h2>
                                        <div class="login-id-container p-4 mb-4">
                                            <p class="text-white-50 mb-2">Your Login ID</p>
                                            <div class="id-display p-3 mb-3">
                                                <span class="login-id">{{loginIdData}}</span>
                                                <button class="copy-btn ms-3" 
                                                        (click)="copyLoginIdLink()"
                                                        title="Copy to clipboard">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                            <small class="text-white-50">Please save this ID for future reference</small>
                                        </div>
                                        <div class="login-link mt-4">
                                            <span class="text-white-50">Ready to start? </span>
                                            <a routerLink="/login" 
                                               class="btn btn-primary px-4">
                                               <i class="fas fa-sign-in-alt me-2"></i>Log In Now
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>